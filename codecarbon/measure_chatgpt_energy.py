# !pip install -q openai codecarbon

import os
from codecarbon import EmissionsTracker
from openai import OpenAI

os.environ["OPENAI_API_KEY"] = "YOUR_API_KEY"

# 1) 啟動碳排追蹤器，指定所在地 (台灣 ISO=TWN)
tracker = EmissionsTracker()
tracker.start()

# 2) 呼叫 ChatGPT；這裡示範 GPT-4o-mini，但任意 model 皆可
client = OpenAI()
reply = client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {"role": "user",
         "content": """請將以下三篇新聞歸納為一段 150 字摘要 
         勞動部公布最新「全台各縣市薪資排行」，根據2024年底勞工退休金新制的「平均提繳工資」統計，收入最高的是新竹市，平均月薪7萬3159元，收入最低的縣市則是彰化縣，平均月薪3萬5177元，只有新竹的一半。消息一出，連彰化人也抱怨，領35K還要加班，當地慣老闆很多。

勞動部統計顯示，新竹市平均月薪為7萬3159元，近3年工資成長12.4%，收入居全台之冠；第2名是新竹縣，平均月收入5萬7749元，工資成長率16.86%；第3名是台北市，平均月收5萬3582元，工資成長率11.42％。

全台薪資倒數3名的縣市依序為台東縣，平均月薪3萬5726元，近3年成長率10.31%；屏東縣3萬5586元，成長率10.33%；吊車尾的彰化縣平均月薪僅3萬5177元，成長率11.24%。

彰化縣薪水全台最低的消息，在Threads上引發討論，不少當地人指出，「彰化都傳產居多，而且沒有制度和人性化觀念，這邊鐵工廠晚上8點還在敲」、「諷刺的是彰化員林市超多超級有錢人」、「以前剛出社會應徵過彰化的服裝店，要載小孩補習、遛狗，還常常有雜事要做跟跑腿，薪資連2萬都沒有也沒勞健保，慣老闆」、「彰化要領35K基本上都是要每天加班12小時，為什麼領那麼少？因為慣老闆都有一套自己的計算方法」。

全台各縣市平均月薪排行：

1.新竹市：73,159元；近3年薪水成長率：12.40%

2.新竹縣：57,749元；近3年薪水成長率：16.86%

3.台北市：53,582元；近3年薪水成長率：11.42%

4.桃園市：45,665元；近3年薪水成長率：11.05%

5.新北市：43,119元；近3年薪水成長率：11.23%

6.苗栗縣：41,707元；近3年薪水成長率：8.75%

7.高雄市：40,660元；近3年薪水成長率：10.58%

8.基隆市：40,406元；近3年薪水成長率：10.53%

9.雲林縣：39,623元；近3年薪水成長率：6.45%

10.台南市：39,599元；近3年薪水成長率：10.03%

11.台中市：39,011元；近3年薪水成長率：11.9%

12.南投縣：37,950元；近3年薪水成長率：9.87%

13.花蓮縣：37,739元；近3年薪水成長率：9.97%

14.宜蘭縣：37,648元；近3年薪水成長率：11.79%

15.嘉義市：37,265元；近3年薪水成長率：10.95%

16.嘉義縣：37,147元；近3年薪水成長率：10.53%

17.台東縣：35,726元；近3年薪水成長率：10.31%

18.屏東縣：35,586元；近3年薪水成長率：10.33%

19.彰化縣：35,177元；近3年薪水成長率：11.24%"""}
    ],
    max_tokens=256,
    temperature=0.3,
)

print(reply.choices[0].message.content)

# 3) 停止追蹤並取得能耗／碳排
emissions: float = tracker.stop()
print(f"Emissions: {emissions:.6f} kg")
